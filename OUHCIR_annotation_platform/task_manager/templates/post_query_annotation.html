{% extends "base.html" %}
{% block title %} Confirm Query Expectation Annotation {% endblock %}
{% block content_title %} Confirm Query Expectation Annotation {% endblock %}
{% block content %}
<style>
    table {
        width: 50%;
    }
    td, th {
      text-align: center;
      width: 5%;
    }
</style>
    <div class="row text-center">
        <h3>
            Please confirm the expectations for this query as follows
        </h3>
    </div>
    <div class="row">
        <div class="col-xs-offset-1 col-xs-10">
            <form class="col-xs-12" id="query-form" action="" method="post" onsubmit="validateForm()" enctype='multipart/form-data'>
                {% csrf_token %}
                <div class="col-xs-12" style="border:1px dashed #000; border-radius:10px">
                    <label for="useful_information" class="number col-xs-12 list_row">1. <b>Useful information</b>: How much useful information did you obtain through this search?</label>
                    <div class="number col-xs-12 list_row">
                        <table>
                            <tr>
                                <th>much less than expected</th>
                                <th></th>
                                <tH></tH>                                
                                <th>just as expected</th>
                                <th></th>
                                <th></th>
                                <th>much more than expected</th>
                            </tr>
                            <tr>
                            <td><label><input type="radio" name="useful_information" value="1"/> 1</label></td>
                            <td><label><input type="radio" name="useful_information" value="2"/> 2</label></td>
                            <td><label><input type="radio" name="useful_information" value="3"/> 3</label></td>
                            <td><label><input type="radio" name="useful_information" value="4"/> 4</label></td>
                            <td><label><input type="radio" name="useful_information" value="5"/> 5</label></td>
                            <td><label><input type="radio" name="useful_information" value="6"/> 6</label></td>
                            <td><label><input type="radio" name="useful_information" value="7"/> 7</label></td>     
                            </tr>
                        </table>
<!--                         <span>&emsp;1: much less than expected</span>
                        <span>&emsp;4: just as expected</span>
                        <span>&emsp;7: much more than expected</span> -->
                    </div>
<!--                         <div class="number col-xs-12 list_row">
                            &emsp;<label><input type="radio" name="useful_information" value="1"/> 1&emsp; </label>
                            <label><input type="radio" name="useful_information" value="2"/> 2&emsp; </label>
                            <label><input type="radio" name="useful_information" value="3"/> 3&emsp; </label>
                            <label><input type="radio" name="useful_information" value="4"/> 4&emsp; </label>
                            <label><input type="radio" name="useful_information" value="5"/> 5&emsp; </label>
                            <label><input type="radio" name="useful_information" value="6"/> 6&emsp; </label>
                            <label><input type="radio" name="useful_information" value="7"/> 7 </label>
                        </div>
 -->
                    <!-- <div class="ratio col-xs-12 list_row">
                        <span style="display:flex;">1: Much less than expected <input type="range" style="width: 20%" name="useful_information" min="1" max="7" value="1" step="1" list="useinfo_marks" oninput="setUseInfo()" onchange="setUseInfo()"/> 7: Much more than expected</span>
                        <span>(Current choice <b><span id="useinfo_value" >1</span></b>)</span>
                        <datalist id="useinfo_marks">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            <option>6</option>
                            <option>7</option>
                        </datalist>
                    </div> -->
<!--                     <input type="range" min="1" max="7" class="col-xs-12 list_row" list="useful_information_list">
                        <datalist id="useful_information_list">
                            <option value="1" label="1: much less than expected"></option>
                            <option value="2" label="2"></option>
                            <option value="3" label="3"></option>
                            <option value="4" label="4: just as expected"></option>
                            <option value="5" label="5"></option>
                            <option value="6" label="6"></option>
                            <option value="7" label="7: much more than expected"></option>
                        </datalist> -->
                    <label for="effort" class="number col-xs-12 list_row">2. <b>Effort</b>: How much efforts did it take for you to collect useful information during this search?</label>
                    <div class="number col-xs-12 list_row">
                        <table>
                            <tr>
                                <th>much less than expected</th>
                                <th></th>
                                <tH></tH>                                
                                <th>just as expected</th>
                                <th></th>
                                <th></th>
                                <th>much more than expected</th>
                            </tr>
                            <tr>
                            <td><label><input type="radio" name="effort" value="1"/> 1</label></td>
                            <td><label><input type="radio" name="effort" value="2"/> 2</label></td>
                            <td><label><input type="radio" name="effort" value="3"/> 3</label></td>
                            <td><label><input type="radio" name="effort" value="4"/> 4</label></td>
                            <td><label><input type="radio" name="effort" value="5"/> 5</label></td>
                            <td><label><input type="radio" name="effort" value="6"/> 6</label></td>
                            <td><label><input type="radio" name="effort" value="7"/> 7</label></td>
                            </tr>                      
                        </table>

<!--                         <span>&emsp;1: much less than expected</span>
                        <span>&emsp;4: just as expected</span>
                        <span>&emsp;7: much more than expected</span> -->
                    </div>
<!--                         <div class="number col-xs-12 list_row">
                            &emsp;<label><input type="radio" name="effort" value="1"/> 1&emsp;</label>
                            <label><input type="radio" name="effort" value="2"/> 2&emsp;</label>
                            <label><input type="radio" name="effort" value="3"/> 3&emsp;</label>
                            <label><input type="radio" name="effort" value="4"/> 4&emsp;</label>
                            <label><input type="radio" name="effort" value="5"/> 5&emsp;</label>
                            <label><input type="radio" name="effort" value="6"/> 6&emsp;</label>
                            <label><input type="radio" name="effort" value="7"/> 7&emsp;</label>
                        </div> -->
                    <label for="satisfaction" class="number col-xs-12 list_row">3. <b>Satisfaction</b>: Rate your satisfaction level with this search:</label>
                    <div class="number col-xs-12 list_row">
                        <table>
                            <tr>
                                <th>very unsatisfied</th>
                                <th>unsatisfied</th>
                                <tH>neutral</tH>                                
                                <th>satisfied</th>
                                <th>very satisfied</th>
                            </tr>
                            <tr>
                            <td><label><input type="radio" name="satisfaction" value="1"/> 1</label></td>
                            <td><label><input type="radio" name="satisfaction" value="2"/> 2</label></td>
                            <td><label><input type="radio" name="satisfaction" value="3"/> 3</label></td>
                            <td><label><input type="radio" name="satisfaction" value="4"/> 4</label></td>
                            <td><label><input type="radio" name="satisfaction" value="5"/> 5</label></td>
                            </tr>                        
                        </table>
                        <!-- <span>&emsp;1: not likely</span>
                        <span>&emsp;7: definitely</span> -->
                    </div>
<!--                         <div class="number col-xs-12 list_row">
                            &emsp;<label><input type="radio" name="satisfaction" value="1"/> 1&emsp;</label>
                            <label><input type="radio" name="satisfaction" value="2"/> 2&emsp;</label>
                            <label><input type="radio" name="satisfaction" value="3"/> 3&emsp;</label>
                            <label><input type="radio" name="satisfaction" value="4"/> 4&emsp;</label>
                            <label><input type="radio" name="satisfaction" value="5"/> 5&emsp;</label>
                            <label><input type="radio" name="satisfaction" value="6"/> 6&emsp;</label>
                            <label><input type="radio" name="satisfaction" value="7"/> 7&emsp;</label>
                        </div> -->
                    <label for="recommendation" class="number col-xs-12 list_row">4. <b>Recommendation</b>: If one of your close friends or family members is working on the same or similar task, how likely is it for you to recommend your search strategy (the issued query and clicked pages) to them??</label>
                    <div class="number col-xs-12 list_row">
                        <table>
                            <tr>
                                <th>not likely</th>
                                <th></th>
                                <tH></tH>                                
                                <th></th>
                                <th></th>
                                <th></th>
                                <th>very likely</th>
                            </tr>
                            <tr>
                            <td><label><input type="radio" name="recommendation" value="1"/> 1</label></td>
                            <td><label><input type="radio" name="recommendation" value="2"/> 2</label></td>
                            <td><label><input type="radio" name="recommendation" value="3"/> 3</label></td>
                            <td><label><input type="radio" name="recommendation" value="4"/> 4</label></td>
                            <td><label><input type="radio" name="recommendation" value="5"/> 5</label></td>
                            <td><label><input type="radio" name="recommendation" value="6"/> 6</label></td>
                            <td><label><input type="radio" name="recommendation" value="7"/> 7</label></td>
                            </tr>                        
                        </table>

<!--                         <span>&emsp;1: not likely</span>
                        <span>&emsp;7: definitely</span> -->
                    </div>
<!--                         <div class="number col-xs-12 list_row">
                            &emsp;<label><input type="radio" name="recommendation" value="1"/> 1&emsp;</label>
                            <label><input type="radio" name="recommendation" value="2"/> 2&emsp;</label>
                            <label><input type="radio" name="recommendation" value="3"/> 3&emsp;</label>
                            <label><input type="radio" name="recommendation" value="4"/> 4&emsp;</label>
                            <label><input type="radio" name="recommendation" value="5"/> 5&emsp;</label>
                            <label><input type="radio" name="recommendation" value="6"/> 6&emsp;</label>
                            <label><input type="radio" name="recommendation" value="7"/> 7&emsp;</label>
                        </div>
 -->                    
                    <label for="problem_type" class="ratio col-xs-12 list_row">5. <b>Problem type</b>: What problem(s) did you encounter during this search? (Multiple options)</label>
                        <div class="ratio col-xs-12 list_row">
                            <label><input type="checkbox" name="problem" value="1"/> I do not know how to express my need in search queries. </label><br>
                            <label><input type="checkbox" name="problem" value="2"/> I see a lot of not good or useless results. </label><br>
                            <label><input type="checkbox" name="problem" value="3"/> I do not know enough about the topic. </label><br>
                            <label><input type="checkbox" name="problem" value="4"/> I am feeling impatient. </label><br>
                            <label><input type="checkbox" name="problem" value="5"/> I do not know if I can trust the information that I am seeing. </label><br>
                            <label><input type="checkbox" name="problem" value="6"/> I may not know all the good or useful sources of information. </label><br>
                            <label><input type="checkbox" name="problem" value="7"/> There is just too much information. </label><br>
                            <label><input type="checkbox" name="problem" value="8"/> What I am looking for does not seem to be available. </label><br>
                            <label><input type="checkbox" name="problem" value="0"/><b style="color:red;"> No problem encountered. </b></label><br>
                        </div>
                    <input id="problem_str" type="hidden" name="problem_str">

                </div>
                <div class="col-xs-12"><br/></div>

            </form>
            <div class="col-xs-12">
                <div id="query-btn" class="col-xs-6 submit-btn btn btn-block btn-lg btn-primary">
                    Submit
                </div>
            </div>
        </div>
        <script>
            // function setUseInfo(){
            //     var useinfo_val = document.getElementById("useinfo_value");
            //     useinfo_val.innerText = document.getElementsByName("useful_information")[0].value;
            // }
            $(document).ready(function () {
                $("input[name='problem'][value='0']").change(function() {
                    if (this.checked){
                        $("input[name='problem']:not([value='0'])").attr("checked",false);
                        $("input[name='problem']:not([value='0'])").hide();
                    } else {
                        $("input[name='problem']:not([value='0'])").show();
                    }
                });
            });

            function validateForm() {
                var checks = $('input[type="checkbox"]:checked').map(function() {
                    return $(this).val();
                }).get();
                $("#problem_str").val(checks);
            }
        </script>

        <script type="application/x-javascript">
            $(function () {
                $('#query-btn').click(
                        function () {
                            var useful_information = $("[name='useful_information']:checked");
                            var effort =$("[name='effort']:checked");
                            var satisfaction = $("[name='satisfaction']:checked");
                            var recommendation = $("[name='recommendation']:checked");
                            var problem = $("[name='problem']:checked");

                            if (useful_information.val() == null) {
                                alert('Please choose a useful information score!');
                                $("[name='useful_information']").focus();
                                return
                            }

                            if (effort.val() == null) {
                                alert('Please choose a effort score!');
                                $("[name='effort']").focus();
                                return
                            }

                            if (satisfaction.val() == null) {
                                alert('Please choose a satisfaction score!');
                                $("[name='satisfaction']").focus();
                                return
                            }

                            if (recommendation.val() == null) {
                                alert('Please choose a recommendation score!');
                                $("[name='recommendation']").focus();
                                return
                            }

                            if (problem.val() == null) {
                                alert('Please choose a problem type!');
                                $("[name='problem']").focus();
                                return
                            }

                            if (confirm("Are you sure to submit all annotations?")) {
                                $('#query-form').submit();
                            }


                        }
                );
            });
        </script>
    </div>

{% endblock %}
