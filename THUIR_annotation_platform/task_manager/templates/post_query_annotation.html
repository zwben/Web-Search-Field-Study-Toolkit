{% extends "base.html" %}
{% block title %} Confirm Query Expectation Annotation {% endblock %}
{% block content_title %} Confirm Query Expectation Annotation {% endblock %}
{% block content %}
    <div class="row text-center">
        <h3>
            Please confirm the expectations for this query as follows
        </h3>
    </div>
    <div class="row">
        <div class="col-xs-offset-1 col-xs-10">
            <form class="col-xs-12" id="query-form" action="" method="post" onsubmit="validateForm()" enctype='multipart/form-data'>
                {% csrf_token %}
                <div class="col-xs-12" style="border:1px dashed #000; border-radius:10px">
                    <label for="useful_information" class="number col-xs-12 list_row">1. <b>Useful information</b>: How much useful information did you obtain through this search?</label>
                        <div class="number col-xs-12 list_row">
                            <label><input type="radio" name="useful_information" value="1"/> 1: much less than expected</label><br>
                            <label><input type="radio" name="useful_information" value="2"/> 2</label><br>
                            <label><input type="radio" name="useful_information" value="3"/> 3</label><br>
                            <label><input type="radio" name="useful_information" value="4"/> 4: just as expected</label><br>
                            <label><input type="radio" name="useful_information" value="5"/> 5</label><br>
                            <label><input type="radio" name="useful_information" value="6"/> 6</label><br>
                            <label><input type="radio" name="useful_information" value="7"/> 7: much more than expected</label><br>
                        </div>
                    <label for="effort" class="number col-xs-12 list_row">2. <b>Effort</b>: How much efforts did it take for you to collect useful information during this search?</label>
                        <div class="number col-xs-12 list_row">
                            <label><input type="radio" name="effort" value="1"/> 1: much less than expected</label><br>
                            <label><input type="radio" name="effort" value="2"/> 2</label><br>
                            <label><input type="radio" name="effort" value="3"/> 3</label><br>
                            <label><input type="radio" name="effort" value="4"/> 4: just as expected</label><br>
                            <label><input type="radio" name="effort" value="5"/> 5</label><br>
                            <label><input type="radio" name="effort" value="6"/> 6</label><br>
                            <label><input type="radio" name="effort" value="7"/> 7: much more than expected</label><br>
                        </div>
                    <label for="satisfaction" class="number col-xs-12 list_row">3. <b>Satisfaction</b>: Rate your satisfaction level with this search:</label>
                        <div class="number col-xs-12 list_row">
                            <label><input type="radio" name="satisfaction" value="1"/> 1: not likely</label><br>
                            <label><input type="radio" name="satisfaction" value="2"/> 2</label><br>
                            <label><input type="radio" name="satisfaction" value="3"/> 3</label><br>
                            <label><input type="radio" name="satisfaction" value="4"/> 4</label><br>
                            <label><input type="radio" name="satisfaction" value="5"/> 5</label><br>
                            <label><input type="radio" name="satisfaction" value="6"/> 6</label><br>
                            <label><input type="radio" name="satisfaction" value="7"/> 7: definitely</label><br>
                        </div>
                    <label for="recommendation" class="number col-xs-12 list_row">4. <b>Recommendation</b>: If one of your close friends have the same task, how likely is it for you to recommend the results you found to him/her?</label>
                        <div class="number col-xs-12 list_row">
                            <label><input type="radio" name="recommendation" value="1"/> 1: not likely</label><br>
                            <label><input type="radio" name="recommendation" value="2"/> 2</label><br>
                            <label><input type="radio" name="recommendation" value="3"/> 3</label><br>
                            <label><input type="radio" name="recommendation" value="4"/> 4</label><br>
                            <label><input type="radio" name="recommendation" value="5"/> 5</label><br>
                            <label><input type="radio" name="recommendation" value="6"/> 6</label><br>
                            <label><input type="radio" name="recommendation" value="7"/> 7: definitely</label><br>
                        </div>
                    
                    <label for="problem_type" class="ratio col-xs-12 list_row">5. <b>Problem_type</b>: What problem(s) did you encounter during this search? (Multiple options)</label>
                        <div class="ratio col-xs-12 list_row">
                            <label><input type="checkbox" name="problem" value="1"/> problem1 </label>
                            <label><input type="checkbox" name="problem" value="2"/> problem2 </label>
                            <label><input type="checkbox" name="problem" value="3"/> problem3 </label>
                            <label><input type="checkbox" name="problem" value="4"/> problem4 </label><br>
                            <label><input type="checkbox" name="problem" value="5"/> problem5 </label>
                            <label><input type="checkbox" name="problem" value="6"/> problem6 </label>
                            <label><input type="checkbox" name="problem" value="7"/> problem7 </label>
                            <label><input type="checkbox" name="problem" value="0"/> problem0 </label><br>
                        </div>
                    <input id="problem_str" type="hidden" name="problem_str">

                </div>
                <div class="col-xs-12"><br/></div>

            </form>
            <div class="col-xs-12">
                <div id="query-btn" class="col-xs-6 submit-btn btn btn-block btn-lg btn-primary">
                    Submit
                </div>
            </div>
        </div>
        <script>
            function validateForm() {
                var checks = $('input[type="checkbox"]:checked').map(function() {
                    return $(this).val();
                }).get();
                $("#problem_str").val(checks);
            }
        </script>

        <script type="application/x-javascript">
            $(function () {
                $('#query-btn').click(
                        function () {
                            var useful_information = $("[name='useful_information']:checked");
                            var effort =$("[name='effort']:checked");
                            var satisfaction = $("[name='satisfaction']:checked");
                            var recommendation = $("[name='recommendation']:checked");
                            var problem = $("[name='problem']:checked");

                            if (useful_information.val() == null) {
                                alert('Please choose a useful information score!');
                                $("[name='useful_information']").focus();
                                return
                            }

                            if (effort.val() == null) {
                                alert('Please choose a effort score!');
                                $("[name='effort']").focus();
                                return
                            }

                            if (satisfaction.val() == null) {
                                alert('Please choose a satisfaction score!');
                                $("[name='satisfaction']").focus();
                                return
                            }

                            if (recommendation.val() == null) {
                                alert('Please choose a recommendation score!');
                                $("[name='recommendation']").focus();
                                return
                            }

                            if (problem.val() == null) {
                                alert('Please choose a problem type!');
                                $("[name='problem']").focus();
                                return
                            }

                            if (confirm("Are you sure to submit all annotations?")) {
                                $('#query-form').submit();
                            }


                        }
                );
            });
        </script>
    </div>

{% endblock %}
